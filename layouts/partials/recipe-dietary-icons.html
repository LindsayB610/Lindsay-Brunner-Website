{{/* Renders dietary icons (DF, V, VG, GF) as graphic badges linking to filtered recipe list. */}}
{{/* Expects: dict "page" . "base" "/recipes/" */}}
{{- $page := .page -}}
{{- $base := default "/recipes/" .base -}}
{{- $dietary := $page.Params.dietary -}}
{{- if $dietary -}}
<span class="recipe-dietary-icons">
  {{- range $dietary -}}
    {{- $slug := . | urlize -}}
    {{- $label := . -}}
    {{- $abbr := cond (eq $slug "dairy-free") "DF" (cond (eq $slug "vegetarian") "V" (cond (eq $slug "vegan") "VG" (cond (eq $slug "gluten-free") "GF" ""))) -}}
    {{- if $abbr -}}
    {{- $url := printf "%s?diet=%s" (strings.TrimSuffix "/" $base) $slug -}}
  <a href="{{ $url }}" class="recipe-dietary-icon" title="{{ $label }}" aria-label="Filter recipes: {{ $label }}">
    <svg class="recipe-dietary-icon-svg" viewBox="0 0 24 24" aria-hidden="true">
      <text x="12" y="16" text-anchor="middle" font-size="11" font-weight="400" font-family="system-ui, sans-serif" fill="currentColor">{{ $abbr }}</text>
    </svg>
  </a>
    {{- end -}}
  {{- end -}}
</span>
{{- end -}}
