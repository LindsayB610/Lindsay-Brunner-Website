{{ define "main" }}
<section class="section">
  <div class="container">
    <div class="section-title">
      <h1>Recipes</h1>
      <p>{{ .Description }}</p>
      <p style="margin-top: 1rem; font-size: 0.9rem;">
        <a href="/recipes/index/" style="color: var(--color-pink); text-decoration: none; font-weight: 500;">
          Browse all recipes by category →
        </a>
      </p>
    </div>

    <div class="recipe-search">
      <label for="recipe-search-input" class="sr-only">Search recipes</label>
      <div class="recipe-search-wrapper">
        <input
          type="text"
          id="recipe-search-input"
          class="recipe-search-input"
          placeholder="Search recipes by title, ingredients, or category..."
          aria-label="Search recipes"
        />
        <button
          type="button"
          id="recipe-search-clear"
          class="recipe-search-clear"
          aria-label="Clear search"
          style="display: none;"
        >
          Clear
        </button>
      </div>
      <div id="recipe-search-results-count" class="recipe-search-results-count" aria-live="polite" aria-atomic="true"></div>
      <div id="recipe-search-empty" class="recipe-search-empty" style="display: none;">
        <p>No recipes found. Try a different search term.</p>
      </div>
    </div>

    <div id="recipes-list">
    {{ $recipes := .Pages }}
    {{ $recipes = where $recipes "Draft" false }}
    {{ $recipes = where $recipes "Type" "!=" "page" }}
    {{ $recipes = $recipes.ByDate.Reverse }}

    {{ if $recipes }}
      {{ range $recipes }}
      <article class="featured-post" style="margin-bottom: 3rem;">
        <div class="featured-content">
          <div class="post-meta">
            <time>{{ .Date.Format "January 2, 2006" }}</time>
          </div>
          <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <p class="featured-excerpt">
            {{ if .Params.subtitle }}
              {{ .Params.subtitle }}
            {{ else }}
              {{ .Summary }}
            {{ end }}
          </p>
          <a href="{{ .RelPermalink }}" class="read-more-link">Read recipe →</a>
        </div>
      </article>
      {{ end }}
    {{ else }}
    <!-- No recipes yet -->
    <div class="no-posts">
      <h2>Coming Soon</h2>
      <p>
        Recipes are cooking! Check back soon for tested recipes and kitchen experiments.
      </p>
    </div>
    {{ end }}
    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js" crossorigin="anonymous"></script>
<script src="/js/recipes-search.js"></script>
{{ end }}

